"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[616],{8640:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>r,toc:()=>l});var a=s(5893),o=s(1151),c=s(7326);const n={title:"Packet Data",sidebar_label:"Packet Data",sidebar_position:4,slug:"/how-it-works/packet-data"},i="Packet Data Structure",r={id:"how-it-works/packet-data",title:"Packet Data",description:"The data that is sent over an IBC channel is called a packet. The packet data is defined by the IBC application module",source:"@site/docs/how-it-works/04-packet-data.mdx",sourceDirName:"how-it-works",slug:"/how-it-works/packet-data",permalink:"/cw-headstash/main/how-it-works/packet-data",draft:!1,unlisted:!1,editUrl:"https://github.com/permissionlessweb/cw-headstash/tree/feat/docusaurus-docs/docs/docs/how-it-works/04-packet-data.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Packet Data",sidebar_label:"Packet Data",sidebar_position:4,slug:"/how-it-works/packet-data"},sidebar:"docsSidebar",previous:{title:"Channel Opening Handshake",permalink:"/cw-headstash/main/how-it-works/channel-handshake"},next:{title:"Headstash Workflow",permalink:"/cw-headstash/main/how-it-works/headstash-workflow"}},d={},l=[{value:"From CosmosMsg to Packet Data",id:"from-cosmosmsg-to-packet-data",level:2},{value:"Acknowledgement Data",id:"acknowledgement-data",level:2}];function h(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h1,{id:"packet-data-structure",children:"Packet Data Structure"}),"\n",(0,a.jsx)(c.Z,{type:"advanced"}),"\n",(0,a.jsx)(c.Z,{type:"protocol"}),"\n",(0,a.jsxs)(t.p,{children:["The data that is sent over an IBC channel is called a packet. The packet data is defined by the IBC application module\nthat is sending the packet. In the case of ",(0,a.jsx)(t.code,{children:"cw-ica-controller"}),", the packet data is defined by the ICS-27 specification."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.2/src/ibc/types/packet.rs#L18-L44\n"})}),"\n",(0,a.jsx)(t.p,{children:"Depending on the tx encoding format, the data field is either encoded as a proto3json string or a protobuf bytes using\nthe following functions:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.2/src/ibc/types/packet.rs#L18-L44\n"})}),"\n",(0,a.jsx)(t.h2,{id:"from-cosmosmsg-to-packet-data",children:"From CosmosMsg to Packet Data"}),"\n",(0,a.jsxs)(t.p,{children:["Since this contract also provides an execute message to send ",(0,a.jsx)(t.code,{children:"CosmosMsg"}),"s as ICA packets, we have a helper function\nthat converts a ",(0,a.jsx)(t.code,{children:"CosmosMsg"})," to a packet data (depending on the tx encoding format, protobuf is better supported):"]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.2/src/ibc/types/packet.rs#L98-L138\n"})}),"\n",(0,a.jsxs)(t.p,{children:["The specific conversion of each ",(0,a.jsx)(t.code,{children:"CosmosMsg"})," variant into a protobuf any or a proto3json string can be found in\n",(0,a.jsx)(t.a,{href:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.2/src/types/cosmos_msg.rs",children:(0,a.jsx)(t.code,{children:"cosmos_msg.rs"})}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"acknowledgement-data",children:"Acknowledgement Data"}),"\n",(0,a.jsx)(t.p,{children:"For each packet that is sent, the receiving module must respond with an acknowledgement packet. The acknowledgement\npacket is used to signal whether or not the ICA packet was successfully executed. The acknowledgement data is defined by the ICS-27 specification."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-rust",metastring:"reference",children:"https://github.com/srdtrk/cw-ica-controller/blob/v0.4.2/src/ibc/types/packet.rs#L169-L178\n"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.code,{children:"cw-ica-controller"})," includes the acknowledgement packet in the ",(0,a.jsx)(t.a,{href:"/cw-headstash/main/contract-api/callbacks",children:"callbacks"})," that\nit makes to the external contract."]})]})}function p(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},7326:(e,t,s)=>{s.d(t,{Z:()=>m});var a=s(7294),o=s(394),c=s(512),n=s(8388);function i(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,c.W)(t))}var r=s(5893);const d=o.fC,l=o.xz,h=a.forwardRef(((e,t)=>{let{className:s,align:a="center",sideOffset:c=4,...n}=e;return(0,r.jsx)(o.VY,{ref:t,align:a,sideOffset:c,className:i("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})}));h.displayName=o.VY.displayName;const p={concepts:{color:"#54ffe0",label:"Concepts",isBright:!0,description:"Learn about the concepts behind 'cw-ica-controller'"},basics:{color:"#F69900",label:"Basics",isBright:!0,description:"Learn the basics of 'cw-ica-controller'"},"ibc-go":{color:"#ff1717",label:"IBC-Go",description:"This section includes IBC-Go specific content"},cosmjs:{color:"#6836D0",label:"CosmJS",description:"This section includes CosmJS specific content"},cosmwasm:{color:"#05BDFC",label:"CosmWasm",description:"This section includes CosmWasm specific content"},protocol:{color:"#00B067",label:"Protocol",description:"This section includes content about protocol specifcations"},advanced:{color:"#f7f199",label:"Advanced",isBright:!0,description:"The content in this section is for advanced users researching"},developer:{color:"#AABAFF",label:"Developer",isBright:!0,description:"This section includes content for external developers using the 'cw-ica-controller'"},tutorial:{color:"#F46800",label:"Tutorial",description:"This section includes a tutorial"},"guided-coding":{color:"#F24CF4",label:"Guided Coding",description:"This section includes guided coding"}},m=e=>{let{type:t,version:s}=e;const a=p[t]||p["ibc-go"],o=a.description||"";return(0,r.jsxs)(d,{children:[(0,r.jsx)(l,{children:(0,r.jsxs)("span",{style:{backgroundColor:a.color,borderRadius:"2px",color:a.isBright?"black":"white",padding:"0.3rem",marginBottom:"1rem",marginRight:"0.25rem",display:"inline-block"},children:[a.label,s?` ${s}`:""]})}),(0,r.jsx)(h,{children:o})]})}}}]);