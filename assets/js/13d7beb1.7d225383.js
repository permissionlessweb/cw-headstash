"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[977],{5484:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>n,toc:()=>c});var r=a(5893),i=a(1151);const o={title:"Headstash Workflow",sidebar_label:"Headstash Workflow",sidebar_position:4,slug:"/how-it-works/headstash-workflow"},s=void 0,n={id:"how-it-works/headstash-workflow",title:"Headstash Workflow",description:"The Deployment Workflow",source:"@site/docs/how-it-works/05-headstash-workflow.mdx",sourceDirName:"how-it-works",slug:"/how-it-works/headstash-workflow",permalink:"/main/how-it-works/headstash-workflow",draft:!1,unlisted:!1,editUrl:"https://github.com/permissionlessweb/cw-headstash/tree/feat/docusaurus-docs/docs/docs/how-it-works/05-headstash-workflow.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Headstash Workflow",sidebar_label:"Headstash Workflow",sidebar_position:4,slug:"/how-it-works/headstash-workflow"},sidebar:"docsSidebar",previous:{title:"Packet Data",permalink:"/main/how-it-works/packet-data"},next:{title:"Bloom Workflow",permalink:"/main/how-it-works/bloom-workflow"}},l={},c=[{value:"The Deployment Workflow",id:"the-deployment-workflow",level:2},{value:"A. Build Wasm Artifacts",id:"a-build-wasm-artifacts",level:3},{value:"B. Deploy Public Crates",id:"b-deploy-public-crates",level:3},{value:"C. Deploy Private Crates (Optional)",id:"c-deploy-private-crates-optional",level:3},{value:"E. Create ICA Account",id:"e-create-ica-account",level:3},{value:"F. Configure Headstash Parameters",id:"f-configure-headstash-parameters",level:3},{value:"The Headstash User Experience (UX) Workflow:",id:"the-headstash-user-experience-ux-workflow",level:2},{value:"A. Connect Eligible Wallet",id:"a-connect-eligible-wallet",level:3},{value:"B. Generate Throwaway Wallet",id:"b-generate-throwaway-wallet",level:3},{value:"C. Verify Ownership",id:"c-verify-ownership",level:3},{value:"D. Register For FeeGrant",id:"d-register-for-feegrant",level:3},{value:"E. Claim Headstash",id:"e-claim-headstash",level:3},{value:"F. Privately IBC Transfer tokens back to Terp Network",id:"f-privately-ibc-transfer-tokens-back-to-terp-network",level:3}];function h(e){const t={h2:"h2",h3:"h3",p:"p",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"the-deployment-workflow",children:"The Deployment Workflow"}),"\n",(0,r.jsx)(t.p,{children:"To deploy, or verify a deployment of the headstash contracts, an ibc connection between Terp Network & Secret Network will be used:"}),"\n",(0,r.jsx)(t.h3,{id:"a-build-wasm-artifacts",children:"A. Build Wasm Artifacts"}),"\n",(0,r.jsx)(t.p,{children:"Building the contracts from source code is a great way to verify code stored on-chain, is the exact same, line for line, with the same source code you are using.\nThis allows for verification that the code deployed will function as we can see it should. With the scripts available, you the wasm blobs can be built and checksums generating an authenticity garuntee."}),"\n",(0,r.jsx)(t.h3,{id:"b-deploy-public-crates",children:"B. Deploy Public Crates"}),"\n",(0,r.jsx)(t.p,{children:"We deploy the wasm artifacts for the public crates first."}),"\n",(0,r.jsx)(t.h3,{id:"c-deploy-private-crates-optional",children:"C. Deploy Private Crates (Optional)"}),"\n",(0,r.jsx)(t.p,{children:"It is optional to deploy or use existing snip120u or headstash code-ids, however to deploy your own, there are secret.js scripts available for deploying the contract artifacts manually."}),"\n",(0,r.jsx)(t.h3,{id:"e-create-ica-account",children:"E. Create ICA Account"}),"\n",(0,r.jsx)(t.p,{children:"An Ica account is created with a contract call to the ica-owner. An admin is set either explicity, or the message sender will be. Various public configurations for the headstash and snip120u contracts during this step"}),"\n",(0,r.jsx)(t.h3,{id:"f-configure-headstash-parameters",children:"F. Configure Headstash Parameters"}),"\n",(0,r.jsx)(t.h2,{id:"the-headstash-user-experience-ux-workflow",children:"The Headstash User Experience (UX) Workflow:"}),"\n",(0,r.jsx)(t.h3,{id:"a-connect-eligible-wallet",children:"A. Connect Eligible Wallet"}),"\n",(0,r.jsx)(t.p,{children:"Any Ethereum or Solana address is able to be considered eligible for headstashes. Claimers will choose between the two wallet types to connect, and will automatically generate a prompt specific to if they are eligible."}),"\n",(0,r.jsx)(t.h3,{id:"b-generate-throwaway-wallet",children:"B. Generate Throwaway Wallet"}),"\n",(0,r.jsx)(t.p,{children:"If an account is eligible, the next prompts ask the account owner to confirm the throwaway wallet to use to claim their headstash, before verifying their ownership."}),"\n",(0,r.jsx)(t.h3,{id:"c-verify-ownership",children:"C. Verify Ownership"}),"\n",(0,r.jsx)(t.p,{children:"Once the throwaway wallet is generated and confirmed, a prompt to generate a signature using either Metamask or Phantom wallet occurs."}),"\n",(0,r.jsx)(t.h3,{id:"d-register-for-feegrant",children:"D. Register For FeeGrant"}),"\n",(0,r.jsx)(t.p,{children:"Feegrants can be requested only be eligible claimers, and requires providing the signature to an external API, to verify a wallet can request a feegrant. To minimize the chance of leaking the signature to the public, we include ecies encryption via the ecies-wasm package."}),"\n",(0,r.jsx)(t.h3,{id:"e-claim-headstash",children:"E. Claim Headstash"}),"\n",(0,r.jsx)(t.p,{children:"Now, thats left to do is claim a headstash by broadcasting the msg to claim, with the throwaway wallet, while having this tx covered if the feegrant was needed/registered."}),"\n",(0,r.jsx)(t.h3,{id:"f-privately-ibc-transfer-tokens-back-to-terp-network",children:"F. Privately IBC Transfer tokens back to Terp Network"})]})}function d(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},1151:(e,t,a)=>{a.d(t,{Z:()=>n,a:()=>s});var r=a(7294);const i={},o=r.createContext(i);function s(e){const t=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function n(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:t},e.children)}}}]);